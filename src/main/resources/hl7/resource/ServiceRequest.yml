#
# (C) Copyright IBM Corp. 2021
#
# SPDX-License-Identifier: Apache-2.0
#
resourceType: ServiceRequest
id:
   type: STRING
   valueOf: 'UUID.randomUUID()'
   expressionType: JEXL
   
identifier_1:
   condition: $valueIn NOT_NULL
   valueOf: datatype/Identifier_var
   generateList: true
   expressionType: resource
   vars:
      valueIn: PV1.19.1 | PID.18.1 | MSH.7
      systemCX: PV1.19.4 | PID.18.4
   constants:
      system: "http://terminology.hl7.org/CodeSystem/v2-0203"
      code: "VN"
      display: "Visit number"

identifier_2:
   condition: $valueIn NOT_NULL
   valueOf: datatype/Identifier_var
   generateList: true
   expressionType: resource
   vars:
      valueIn: ORC.3.1 | OBR.3.1
   constants:
      system: "http://terminology.hl7.org/CodeSystem/v2-0203"
      code: "FILL"
      display: "Filler Identifier"

identifier_3:
   condition: $valueIn NOT_NULL
   valueOf: datatype/Identifier_var
   generateList: true
   expressionType: resource
   vars:
      valueIn: ORC.2.1 | OBR.2.1
   constants:
      system: "http://terminology.hl7.org/CodeSystem/v2-0203"
      code: "PLAC"
      display: "Placer Identifier"

status:
   type: STRING
   valueOf: $default
   expressionType: HL7Spec
   constants:
      default: "unknown"

intent:
   type: STRING
   valueOf: $default
   expressionType: HL7Spec
   constants:
      default: "filler-order"

subject:
   valueOf: datatype/Reference
   expressionType: resource
   specs: $Patient